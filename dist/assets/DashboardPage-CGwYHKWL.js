import{j as e,m as a,P as Le,k as be,b as J,M as Me,A as xe,C as Pe,U as V,l as Ke,n as Oe,o as $e,T as pe}from"./ui-D_jLh_Lr.js";import{u as he,a as u,l as ge,m as je,b as Be}from"./index-D5lOMFz8.js";import{r as i}from"./vendor-B9gohGc-.js";import{L as F,c as Fe,u as He}from"./router-CIHs1KQM.js";import{R as T,B as P,C as K,X as O,Y as $,T as U,a as B,P as We,b as Ye,c as Xe}from"./charts-B0kA60lP.js";import"./supabase-DOoHAlwf.js";function qe(){const{user:d}=he(),[x,p]=i.useState({activeInjuries:0,upcomingAppointments:0,unreadMessages:0,totalInjuries:0}),[w,E]=i.useState([]),[D,S]=i.useState(!0);i.useEffect(()=>{d&&L()},[d]);const L=async()=>{if(d)try{S(!0);const n=await u.getInjuries(d.id),l=n.filter(o=>["reported","assigned","in_treatment","recovering"].includes(o.status)),j=(await u.getAppointments(d.id,"student")).filter(o=>new Date(o.appointment_date)>new Date&&o.status==="scheduled"),f=(await u.getMessages(d.id)).filter(o=>o.receiver_id===d.id&&!o.read);p({activeInjuries:l.length,upcomingAppointments:j.length,unreadMessages:f.length,totalInjuries:n.length}),E(n.slice(0,3))}catch(n){ge.error("Error fetching dashboard data:",n)}finally{S(!1)}},_=n=>{switch(n){case"mild":return"bg-yellow-100 text-yellow-800";case"moderate":return"bg-orange-100 text-orange-800";case"severe":return"bg-red-100 text-red-800";case"critical":return"bg-red-200 text-red-900";default:return"bg-gray-100 text-gray-800"}},k=n=>{switch(n){case"reported":return"bg-blue-100 text-blue-800";case"assigned":return"bg-purple-100 text-purple-800";case"in_treatment":return"bg-indigo-100 text-indigo-800";case"recovering":return"bg-green-100 text-green-800";case"resolved":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return D?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Student Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track your injury recovery and manage appointments"})]}),e.jsx(F,{to:"/report-injury",children:e.jsxs(a.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium flex items-center space-x-2 hover:bg-blue-700 transition-colors",children:[e.jsx(Le,{className:"w-5 h-5"}),e.jsx("span",{children:"Report Injury"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Injuries"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.activeInjuries})]}),e.jsx("div",{className:"w-12 h-12 bg-red-50 rounded-lg flex items-center justify-center",children:e.jsx(be,{className:"w-6 h-6 text-red-600"})})]})}),e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Upcoming Appointments"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.upcomingAppointments})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-lg flex items-center justify-center",children:e.jsx(J,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Unread Messages"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.unreadMessages})]}),e.jsx("div",{className:"w-12 h-12 bg-green-50 rounded-lg flex items-center justify-center",children:e.jsx(Me,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Injuries"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.totalInjuries})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-50 rounded-lg flex items-center justify-center",children:e.jsx(xe,{className:"w-6 h-6 text-purple-600"})})]})})]}),e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Injuries"})}),e.jsx("div",{className:"p-6",children:w.length>0?e.jsx("div",{className:"space-y-4",children:w.map(n=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:n.injury_type}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n.body_part}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Reported: ",new Date(n.date_reported).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${_(n.severity)}`,children:n.severity}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${k(n.status)}`,children:n.status.replace("_"," ")})]})]},n.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No injuries reported"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Keep up the good work staying injury-free!"}),e.jsx(F,{to:"/report-injury",children:e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Report an Injury"})})]})})]})]})}function Ge(){const{user:d}=he(),[x,p]=i.useState({assignedAthletes:0,todayAppointments:0,pendingUpdates:0,completedTreatments:0}),[w,E]=i.useState([]),[D,S]=i.useState([]),[L,_]=i.useState(!0);i.useEffect(()=>{d&&k()},[d]);const k=async()=>{if(d)try{_(!0);const h=(await u.getAssignments(d.id)).filter(m=>m.active),j=h.map(m=>{const R=je.find(W=>W.id===m.student_id);return{...m,student:R,injury:{injury_type:"Ankle Sprain",severity:"moderate",body_part:"Left Ankle"}}}),b=await u.getAppointments(d.id,"practitioner"),f=new Date().toISOString().split("T")[0],o=b.filter(m=>m.appointment_date.startsWith(f)),z=b.filter(m=>new Date(m.appointment_date)>=new Date).slice(0,3).map(m=>({...m,student:je.find(R=>R.id===m.student_id)})),H=await Be.getRecoveryLogs(d.id);p({assignedAthletes:h.length,todayAppointments:o.length,pendingUpdates:Math.max(0,h.length-H.length),completedTreatments:H.length}),E(j.slice(0,3)),S(z)}catch(l){ge.error("Error fetching dashboard data:",l)}finally{_(!1)}},n=l=>{switch(l){case"mild":return"bg-yellow-100 text-yellow-800";case"moderate":return"bg-orange-100 text-orange-800";case"severe":return"bg-red-100 text-red-800";case"critical":return"bg-red-200 text-red-900";default:return"bg-gray-100 text-gray-800"}};return L?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Practitioner Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your athletes and track their recovery progress"})]}),e.jsx(F,{to:"/recovery-logs",children:e.jsxs(a.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-green-600 text-white px-6 py-3 rounded-lg font-medium flex items-center space-x-2 hover:bg-green-700 transition-colors",children:[e.jsx(Pe,{className:"w-5 h-5"}),e.jsx("span",{children:"Add Recovery Log"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Assigned Athletes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.assignedAthletes})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-lg flex items-center justify-center",children:e.jsx(V,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Today's Appointments"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.todayAppointments})]}),e.jsx("div",{className:"w-12 h-12 bg-green-50 rounded-lg flex items-center justify-center",children:e.jsx(J,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Updates"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.pendingUpdates})]}),e.jsx("div",{className:"w-12 h-12 bg-orange-50 rounded-lg flex items-center justify-center",children:e.jsx(Ke,{className:"w-6 h-6 text-orange-600"})})]})}),e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed Sessions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.completedTreatments})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-50 rounded-lg flex items-center justify-center",children:e.jsx(Oe,{className:"w-6 h-6 text-purple-600"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Assignments"})}),e.jsx("div",{className:"p-6",children:w.length>0?e.jsx("div",{className:"space-y-4",children:w.map(l=>{var h,j,b,f,o;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:(h=l.student)==null?void 0:h.full_name}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[(j=l.injury)==null?void 0:j.injury_type," - ",(b=l.injury)==null?void 0:b.body_part]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned: ",new Date(l.assigned_at).toLocaleDateString()]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${n(((f=l.injury)==null?void 0:f.severity)||"mild")}`,children:(o=l.injury)==null?void 0:o.severity})]},l.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(V,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No athletes assigned yet"})]})})]}),e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Upcoming Appointments"})}),e.jsx("div",{className:"p-6",children:D.length>0?e.jsx("div",{className:"space-y-4",children:D.map(l=>{var h;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:(h=l.student)==null?void 0:h.full_name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:new Date(l.appointment_date).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Duration: ",l.duration_minutes," minutes"]})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:l.status})})]},l.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(J,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No upcoming appointments"})]})})]})]})]})}function Je(){const d=Fe(),x=He(),[p,w]=i.useState({totalStudents:0,totalPractitioners:0,activeInjuries:0,pendingAssignments:0,totalAppointments:0,recoveryRate:0}),[E,D]=i.useState([]),[S,L]=i.useState([]),[_,k]=i.useState(!0),[n,l]=i.useState([]),[h,j]=i.useState([]),[b,f]=i.useState([]),[o,z]=i.useState([]),[H,m]=i.useState(0),[R,W]=i.useState(null),[fe,ve]=i.useState([]),[Y,Q]=i.useState(""),[X,Z]=i.useState(""),[q,ee]=i.useState("all"),[G,te]=i.useState("all");i.useEffect(()=>{const r=new URLSearchParams(d.search),y=r.get("start")||"",C=r.get("end")||"",A=r.get("sport")||"all",g=r.get("severity")||"all";Q(y),Z(C),ee(A),te(g),Ne(y,C,A,g)},[d.search]);const Ne=async(r=Y,y=X,C=q,A=G)=>{try{k(!0);const[g,v,N]=await Promise.all([u.getUsers("student"),u.getUsers("practitioner"),u.getInjuries()]),se=await u.getAppointments("","admin"),ae=await u.getAllInjuries(),we=await u.getAllRtpChecklists(),ue=r?new Date(r):null,ye=y?new Date(y):null,M=N.filter(t=>{const s=new Date(t.date_reported);if(ue&&s<ue||ye&&s>ye||A!=="all"&&t.severity!==A)return!1;if(C!=="all"){const c=g.find(me=>me.id===t.student_id),I=(c==null?void 0:c.sport)||"Unknown";if(I!==I)return!1}return!0});ve(M);const Se=N.filter(t=>["reported","assigned","in_treatment","recovering"].includes(t.status)).length,Ae=N.filter(t=>t.status==="reported").length,De=N.filter(t=>t.status==="resolved").length,_e=N.length>0?Math.round(De/N.length*100):0;w({totalStudents:g.length,totalPractitioners:v.length,activeInjuries:Se,pendingAssignments:Ae,totalAppointments:se.length,recoveryRate:_e});const re={};M.forEach(t=>{const s=new Date(t.date_reported),c=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`;re[c]=(re[c]||0)+1});const ke=Object.entries(re).sort(([t],[s])=>t.localeCompare(s)).map(([t,s])=>({month:t,injuries:s}));D(ke);const ie={};M.forEach(t=>{const s=t.severity;ie[s]=(ie[s]||0)+1});const Re={mild:"#fbbf24",moderate:"#fb923c",severe:"#ef4444",critical:"#dc2626"},Ce=Object.entries(ie).map(([t,s])=>({name:t,value:s,color:Re[t]}));L(Ce);const ne={};M.forEach(t=>{const s=g.find(I=>I.id===t.student_id),c=(s==null?void 0:s.sport)||"Unknown";ne[c]=(ne[c]||0)+1}),f(Object.entries(ne).map(([t,s])=>({name:t,value:s})));const le={};M.forEach(t=>{let s=0;if(typeof t.days_lost=="number")s=t.days_lost;else if(t.date_returned){const I=new Date(t.date_occurred||t.date_reported),me=new Date(t.date_returned);s=Math.max(0,Math.round((me.getTime()-I.getTime())/(1e3*60*60*24)))}else s=0;const c=t.severity||"mild";le[c]=(le[c]||0)+s}),z(Object.entries(le).map(([t,s])=>({name:t,value:s})));const de={};ae.forEach(t=>{const s=`${t.student_id}:${t.injury_type}`;de[s]=(de[s]||0)+1});const Ie=Object.values(de).filter(t=>t>1).length;m(ae.length?Math.round(Ie/ae.length*100):0);const ce=we.filter(t=>t.status==="cleared"&&t.cleared_at);if(ce.length){const t=Math.round(ce.reduce((s,c)=>s+(new Date(c.cleared_at).getTime()-new Date(c.created_at).getTime()),0)/ce.length/864e5);W(t)}else W(null);const Te=g.reduce((t,s)=>{const c=s.sport||"Unknown";return t[c]=(t[c]||0)+1,t},{});j(Object.entries(Te).map(([t,s])=>({name:t,value:s})));const Ue=await u.getAssignments(),oe={};Ue.forEach(t=>{t.active&&(oe[t.practitioner_id]=(oe[t.practitioner_id]||0)+1)});const Ee=new Map(v.map(t=>[t.id,t.full_name]));l(Object.entries(oe).map(([t,s])=>({name:Ee.get(t)||t,value:s})))}catch(g){ge.error("Error fetching dashboard data:",g)}finally{k(!1)}};return _?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Start date"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:Y,onChange:r=>Q(r.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"End date"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:X,onChange:r=>Z(r.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Sport"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:q,onChange:r=>ee(r.target.value),children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"Rugby",children:"Rugby"}),e.jsx("option",{value:"Soccer",children:"Soccer"}),e.jsx("option",{value:"Athletics",children:"Athletics"}),e.jsx("option",{value:"Basketball",children:"Basketball"}),e.jsx("option",{value:"Swimming",children:"Swimming"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Severity"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:G,onChange:r=>te(r.target.value),children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"mild",children:"Mild"}),e.jsx("option",{value:"moderate",children:"Moderate"}),e.jsx("option",{value:"severe",children:"Severe"}),e.jsx("option",{value:"critical",children:"Critical"})]})]})]}),e.jsxs("div",{className:"flex justify-end mt-3",children:[e.jsx("button",{className:"px-4 py-2 border rounded",onClick:()=>{const r=new URLSearchParams;Y&&r.set("start",Y),X&&r.set("end",X),q!=="all"&&r.set("sport",q),G!=="all"&&r.set("severity",G),x({search:r.toString()})},children:"Apply"}),e.jsx("button",{className:"ml-2 px-4 py-2 border rounded",onClick:()=>{Q(""),Z(""),ee("all"),te("all"),x({search:""})},children:"Reset"})]})]}),e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"System overview and analytics"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(F,{to:"/assign-practitioners",children:e.jsxs(a.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium flex items-center space-x-2 hover:bg-blue-700 transition-colors",children:[e.jsx($e,{className:"w-5 h-5"}),e.jsx("span",{children:"Assign Practitioner"})]})}),e.jsx(F,{to:"/analytics",children:e.jsxs(a.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-purple-600 text-white px-6 py-3 rounded-lg font-medium flex items-center space-x-2 hover:bg-purple-700 transition-colors",children:[e.jsx(pe,{className:"w-5 h-5"}),e.jsx("span",{children:"Full Analytics"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p.totalStudents})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-lg flex items-center justify-center",children:e.jsx(V,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Practitioners"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p.totalPractitioners})]}),e.jsx("div",{className:"w-12 h-12 bg-green-50 rounded-lg flex items-center justify-center",children:e.jsx(V,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Injuries"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p.activeInjuries})]}),e.jsx("div",{className:"w-12 h-12 bg-red-50 rounded-lg flex items-center justify-center",children:e.jsx(xe,{className:"w-6 h-6 text-red-600"})})]})}),e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Assignments"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p.pendingAssignments})]}),e.jsx("div",{className:"w-12 h-12 bg-orange-50 rounded-lg flex items-center justify-center",children:e.jsx(be,{className:"w-6 h-6 text-orange-600"})})]})}),e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Appointments"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p.totalAppointments})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-50 rounded-lg flex items-center justify-center",children:e.jsx(J,{className:"w-6 h-6 text-purple-600"})})]})}),e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Recovery Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[p.recoveryRate,"%"]})]}),e.jsx("div",{className:"w-12 h-12 bg-green-50 rounded-lg flex items-center justify-center",children:e.jsx(pe,{className:"w-6 h-6 text-green-600"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Injury Trends"}),e.jsx(T,{width:"100%",height:300,children:e.jsxs(P,{data:E,children:[e.jsx(K,{strokeDasharray:"3 3"}),e.jsx(O,{dataKey:"month"}),e.jsx($,{}),e.jsx(U,{}),e.jsx(B,{dataKey:"injuries",fill:"#3b82f6",radius:[4,4,0,0]})]})})]}),e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Injury Severity Distribution"}),e.jsx(T,{width:"100%",height:300,children:e.jsxs(We,{children:[e.jsx(Ye,{data:S,cx:"50%",cy:"50%",outerRadius:100,fill:"#8884d8",dataKey:"value",label:({name:r,value:y})=>`${r}: ${y}`,children:S.map((r,y)=>e.jsx(Xe,{fill:r.color},`cell-${y}`))}),e.jsx(U,{})]})})]}),e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Students by Sport"}),e.jsx(T,{width:"100%",height:300,children:e.jsxs(P,{data:h,children:[e.jsx(K,{strokeDasharray:"3 3"}),e.jsx(O,{dataKey:"name"}),e.jsx($,{allowDecimals:!1}),e.jsx(U,{}),e.jsx(B,{dataKey:"value",fill:"#10b981",radius:[4,4,0,0]})]})})]}),e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Practitioner Workload (Active Assignments)"}),e.jsx(T,{width:"100%",height:300,children:e.jsxs(P,{data:n,children:[e.jsx(K,{strokeDasharray:"3 3"}),e.jsx(O,{dataKey:"name",interval:0,angle:-15,textAnchor:"end",height:60}),e.jsx($,{allowDecimals:!1}),e.jsx(U,{}),e.jsx(B,{dataKey:"value",fill:"#f59e0b",radius:[4,4,0,0]})]})})]}),e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.75},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Injury Incidence by Sport"}),e.jsx(T,{width:"100%",height:300,children:e.jsxs(P,{data:b,children:[e.jsx(K,{strokeDasharray:"3 3"}),e.jsx(O,{dataKey:"name",interval:0,angle:-15,textAnchor:"end",height:60}),e.jsx($,{allowDecimals:!1}),e.jsx(U,{}),e.jsx(B,{dataKey:"value",fill:"#6366f1",radius:[4,4,0,0]})]})})]}),e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Estimated Time-loss by Severity (days)"}),e.jsx(T,{width:"100%",height:300,children:e.jsxs(P,{data:o,children:[e.jsx(K,{strokeDasharray:"3 3"}),e.jsx(O,{dataKey:"name"}),e.jsx($,{allowDecimals:!1}),e.jsx(U,{}),e.jsx(B,{dataKey:"value",fill:"#f97316",radius:[4,4,0,0]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Recurrence Rate"}),e.jsxs("div",{className:"text-3xl font-bold",children:[H,"%"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Avg. RTP Time"}),e.jsx("div",{className:"text-3xl font-bold",children:R!==null?`${R} days`:"â€”"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"px-4 py-2 border rounded",onClick:()=>{const r=["id","student_id","injury_type","severity","body_part","date_reported","date_returned","days_lost","status"],y=fe.map(N=>r.map(se=>JSON.stringify(N[se]??"")).join(",")),C=[r.join(","),...y].join(`
`),A=new Blob([C],{type:"text/csv;charset=utf-8;"}),g=URL.createObjectURL(A),v=document.createElement("a");v.href=g,v.download="injuries_export.csv",document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(g)},children:"Export CSV"})})]})}function st(){const{profile:d}=he();if(!d)return null;switch(d.role){case"student":return e.jsx(qe,{});case"practitioner":return e.jsx(Ge,{});case"admin":return e.jsx(Je,{});default:return e.jsx("div",{children:"Invalid role"})}}export{st as DashboardPage};
