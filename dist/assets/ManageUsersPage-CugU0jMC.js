import{j as e,m as t,U as c,P as f,c as N,x as b,i as w,f as v,I as S,J as U}from"./ui-D_jLh_Lr.js";import{r as l}from"./vendor-B9gohGc-.js";import{u as C,a as P,l as R}from"./index-D5lOMFz8.js";import"./supabase-DOoHAlwf.js";import"./router-CIHs1KQM.js";function M(){C();const[a,x]=l.useState([]),[m,d]=l.useState(!0),[i,h]=l.useState(""),[n,p]=l.useState("all");l.useEffect(()=>{u()},[]);const u=async()=>{try{d(!0);const s=await P.getUsers();x(s)}catch(s){R.error("Error fetching users:",s)}finally{d(!1)}},o=a.filter(s=>{const r=s.full_name.toLowerCase().includes(i.toLowerCase())||s.email.toLowerCase().includes(i.toLowerCase()),j=n==="all"||s.role===n;return r&&j}),g=s=>{switch(s){case"admin":return"bg-red-100 text-red-800";case"practitioner":return"bg-blue-100 text-blue-800";case"student":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},y=s=>{switch(s){case"admin":return"👑";case"practitioner":return"👨‍⚕️";case"student":return"🎓";default:return"👤"}};return m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(c,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Manage Users"}),e.jsx("p",{className:"text-gray-600",children:"Manage all system users and their roles"})]})]}),e.jsxs("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium flex items-center space-x-2 hover:bg-blue-700 transition-colors",children:[e.jsx(f,{className:"w-5 h-5"}),e.jsx("span",{children:"Add User"})]})]}),e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{label:"Total Users",value:a.length,color:"bg-blue-500"},{label:"Students",value:a.filter(s=>s.role==="student").length,color:"bg-green-500"},{label:"Practitioners",value:a.filter(s=>s.role==="practitioner").length,color:"bg-purple-500"},{label:"Admins",value:a.filter(s=>s.role==="admin").length,color:"bg-red-500"}].map((s,r)=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s.label}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.value})]}),e.jsx("div",{className:`w-12 h-12 ${s.color} rounded-lg flex items-center justify-center`,children:e.jsx(c,{className:"w-6 h-6 text-white"})})]})},r))}),e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(N,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:i,onChange:s=>h(s.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{className:"w-5 h-5 text-gray-400"}),e.jsxs("select",{value:n,onChange:s=>p(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"student",children:"Students"}),e.jsx("option",{value:"practitioner",children:"Practitioners"}),e.jsx("option",{value:"admin",children:"Admins"})]})]})]})}),e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map((s,r)=>e.jsxs(t.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:r*.05},className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:y(s.role)})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.full_name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${g(s.role)}`,children:s.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[s.phone&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx("span",{children:s.phone})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{children:s.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900 p-1",children:e.jsx(S,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-red-600 hover:text-red-900 p-1",children:e.jsx(U,{className:"w-4 h-4"})})]})})]},s.id))})]})})}),o.length===0&&e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12 bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx(c,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or filter criteria."})]})]})}export{M as ManageUsersPage};
