import{j as e,m as c,A as g,n as y,l as b}from"./ui-D_jLh_Lr.js";import{r as d}from"./vendor-B9gohGc-.js";import{u as w,l as P}from"./index-D5lOMFz8.js";import"./supabase-DOoHAlwf.js";import"./router-CIHs1KQM.js";function S(){const{user:o}=w(),[m,x]=d.useState([]),[f,h]=d.useState(!0);d.useEffect(()=>{o&&p()},[o]);const p=async()=>{if(o)try{h(!0),x([{id:"plan-1",title:"Ankle Sprain Recovery Plan",phases:[{title:"Phase 1: Acute Recovery (Days 1-3)",completed:!0,exercises:[{name:"Rest, Ice, Compression, Elevation",done:!0},{name:"Ankle Alphabet Exercises",done:!0},{name:"Gentle Range of Motion",done:!1}]},{title:"Phase 2: Subacute Recovery (Days 4-10)",completed:!1,exercises:[{name:"Calf Raises (3x15)",done:!1},{name:"Single-leg Balance (2x30s)",done:!1},{name:"Ankle Circles (3x10 each direction)",done:!1}]},{title:"Phase 3: Return to Activity (Days 11-21)",completed:!1,exercises:[{name:"Lunges (3x10 each leg)",done:!1},{name:"Jump Rope (5 minutes)",done:!1},{name:"Sport-specific Drills",done:!1}]}],created_at:"2024-01-20T10:00:00Z"}])}catch(s){P.error("Error fetching recovery plans:",s)}finally{h(!1)}},j=(s,l,r)=>{x(i=>i.map(t=>{if(t.id===s){const a=[...t.phases];return a[l]={...a[l],exercises:a[l].exercises.map((n,N)=>N===r?{...n,done:!n.done}:n)},{...t,phases:a}}return t}))},v=s=>s.exercises.filter(r=>r.done).length/s.exercises.length*100,u=s=>{const l=s.phases.reduce((i,t)=>i+t.exercises.length,0);return s.phases.reduce((i,t)=>i+t.exercises.filter(a=>a.done).length,0)/l*100};return f?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(g,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Recovery Plans"}),e.jsx("p",{className:"text-gray-600",children:"Follow your personalized recovery program"})]})]}),m.length>0?e.jsx("div",{className:"space-y-6",children:m.map((s,l)=>e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Created: ",new Date(s.created_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[Math.round(u(s)),"%"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Complete"})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-6",children:e.jsx(c.div,{className:"bg-blue-600 h-2 rounded-full",initial:{width:0},animate:{width:`${u(s)}%`},transition:{duration:.5}})}),e.jsx("div",{className:"space-y-4",children:s.phases.map((r,i)=>{const t=v(r);return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:r.title}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[Math.round(t),"%"]}),r.completed&&e.jsx(y,{className:"w-5 h-5 text-green-600"})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1 mb-3",children:e.jsx(c.div,{className:"bg-green-500 h-1 rounded-full",initial:{width:0},animate:{width:`${t}%`},transition:{duration:.5}})}),e.jsx("div",{className:"space-y-2",children:r.exercises.map((a,n)=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50",children:[e.jsx("button",{onClick:()=>j(s.id,i,n),className:"flex-shrink-0",children:a.done?e.jsx(y,{className:"w-5 h-5 text-green-600"}):e.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 rounded-full"})}),e.jsx("span",{className:`flex-1 ${a.done?"line-through text-gray-500":"text-gray-900"}`,children:a.name}),a.done&&e.jsx(b,{className:"w-4 h-4 text-green-600"})]},n))})]},i)})})]},s.id))}):e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12 bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx(g,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Recovery Plans"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have any active recovery plans yet. Your practitioner will create one for you after your injury assessment."})]})]})}export{S as RecoveryPlansPage};
