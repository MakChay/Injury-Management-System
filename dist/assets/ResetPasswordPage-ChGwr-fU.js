import{j as e,n as E,m as f,g as h,E as x,h as p}from"./ui-D_jLh_Lr.js";import{r as s}from"./vendor-B9gohGc-.js";import{u as L,A as g}from"./index-D5lOMFz8.js";import{d as A,u as T,L as w}from"./router-CIHs1KQM.js";import"./supabase-DOoHAlwf.js";function I(){const[o,b]=s.useState(""),[d,y]=s.useState(""),[n,j]=s.useState(!1),[i,N]=s.useState(!1),[u,l]=s.useState(!1),[v,P]=s.useState(!1),[m,r]=s.useState(""),{updatePassword:k}=L(),[c]=A(),S=T();s.useEffect(()=>{const t=c.get("access_token"),a=c.get("refresh_token");(!t||!a)&&r("Invalid or missing reset token. Please request a new password reset.")},[c]);const C=async t=>{if(t.preventDefault(),l(!0),r(""),o!==d){r("Passwords do not match"),l(!1);return}if(o.length<6){r("Password must be at least 6 characters long"),l(!1);return}try{const{error:a}=await k(o);a?r(a.message):(P(!0),setTimeout(()=>{S("/login")},2e3))}catch{r("An unexpected error occurred")}finally{l(!1)}};return v?e.jsx(g,{title:"Password Updated",subtitle:"Your password has been successfully reset",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(E,{className:"w-8 h-8 text-green-600"})}),e.jsx("p",{className:"text-gray-600",children:"Your password has been successfully updated."}),e.jsx("p",{className:"text-sm text-gray-500",children:"You will be redirected to the login page shortly."}),e.jsx(w,{to:"/login",className:"inline-block bg-blue-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Continue to Login"})]})}):e.jsx(g,{title:"Reset Password",subtitle:"Enter your new password",children:e.jsxs("form",{className:"space-y-6",onSubmit:C,children:[m&&e.jsx(f.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:m}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{id:"password",type:n?"text":"password",value:o,onChange:t=>b(t.target.value),required:!0,className:"pl-10 pr-10 w-full px-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter new password"}),e.jsx("button",{type:"button",onClick:()=>j(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n?e.jsx(x,{className:"w-5 h-5"}):e.jsx(p,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{id:"confirmPassword",type:i?"text":"password",value:d,onChange:t=>y(t.target.value),required:!0,className:"pl-10 pr-10 w-full px-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Confirm new password"}),e.jsx("button",{type:"button",onClick:()=>N(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?e.jsx(x,{className:"w-5 h-5"}):e.jsx(p,{className:"w-5 h-5"})})]})]}),e.jsx(f.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:u,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?"Updating Password...":"Update Password"}),e.jsx("div",{className:"text-center",children:e.jsx(w,{to:"/login",className:"text-sm text-blue-600 hover:text-blue-500 font-medium",children:"Back to Sign In"})})]})})}export{I as ResetPasswordPage};
