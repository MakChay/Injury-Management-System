import{j as e,m as r,R as l,f,q as h,n as p}from"./ui-D_jLh_Lr.js";import{r as c}from"./vendor-B9gohGc-.js";import{A as j}from"./index-D5lOMFz8.js";import{d as b,L as m}from"./router-CIHs1KQM.js";import"./supabase-DOoHAlwf.js";function P(){const[s,t]=c.useState("loading"),[u,a]=c.useState(""),[n]=b();c.useEffect(()=>{const i=n.get("token"),g=n.get("type");if(!i||g!=="signup"){t("error"),a("Invalid verification link");return}(async()=>{try{await new Promise(o=>setTimeout(o,2e3)),t("success"),a("Your email has been successfully verified!")}catch{t("error"),a("Failed to verify email. Please try again.")}})()},[n]);const d=async()=>{t("loading");try{await new Promise(i=>setTimeout(i,1e3)),t("success"),a("Verification email sent! Please check your inbox.")}catch{t("error"),a("Failed to send verification email. Please try again.")}},y=()=>{switch(s){case"loading":return e.jsx(l,{className:"w-8 h-8 text-blue-600 animate-spin"});case"success":return e.jsx(p,{className:"w-8 h-8 text-green-600"});case"error":case"expired":return e.jsx(h,{className:"w-8 h-8 text-red-600"});default:return e.jsx(f,{className:"w-8 h-8 text-gray-600"})}},x=()=>{switch(s){case"loading":return"bg-blue-100";case"success":return"bg-green-100";case"error":case"expired":return"bg-red-100";default:return"bg-gray-100"}};return e.jsx(j,{title:"Email Verification",subtitle:"Verify your email address to continue",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx(r.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:15},className:`w-16 h-16 ${x()} rounded-full flex items-center justify-center mx-auto`,children:y()}),e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[s==="loading"&&"Verifying your email...",s==="success"&&"Email Verified!",(s==="error"||s==="expired")&&"Verification Failed"]}),e.jsx("p",{className:"text-gray-600",children:u}),s==="success"&&e.jsxs(r.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"You can now access all features of the DUT Athletic Injury Management system."}),e.jsx(m,{to:"/login",className:"inline-block bg-blue-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Continue to Login"})]}),(s==="error"||s==="expired")&&e.jsxs(r.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"space-y-4",children:[e.jsxs("button",{onClick:d,className:"inline-flex items-center bg-blue-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:[e.jsx(l,{className:"w-4 h-4 mr-2"}),"Resend Verification Email"]}),e.jsx("div",{children:e.jsx(m,{to:"/login",className:"text-sm text-blue-600 hover:text-blue-500 font-medium",children:"Back to Sign In"})})]})]})]})})}export{P as VerifyEmailPage};
