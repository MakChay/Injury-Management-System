import{j as e,m as r,A as o,P as b,b as j,k as f,h as v}from"./ui-D_jLh_Lr.js";import{r as i}from"./vendor-B9gohGc-.js";import{u as N,a as w,l as k}from"./index-D5lOMFz8.js";import{L as d}from"./router-CIHs1KQM.js";import"./supabase-DOoHAlwf.js";function E(){const{user:a}=N(),[l,x]=i.useState([]),[m,n]=i.useState(!0),[s,u]=i.useState("all");i.useEffect(()=>{a&&g()},[a]);const g=async()=>{if(a)try{n(!0);const t=await w.getInjuries(a.id);x(t)}catch(t){k.error("Error fetching injuries:",t)}finally{n(!1)}},h=t=>{switch(t){case"mild":return"bg-yellow-100 text-yellow-800";case"moderate":return"bg-orange-100 text-orange-800";case"severe":return"bg-red-100 text-red-800";case"critical":return"bg-red-200 text-red-900";default:return"bg-gray-100 text-gray-800"}},p=t=>{switch(t){case"reported":return"bg-blue-100 text-blue-800";case"assigned":return"bg-purple-100 text-purple-800";case"in_treatment":return"bg-indigo-100 text-indigo-800";case"recovering":return"bg-green-100 text-green-800";case"resolved":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},c=l.filter(t=>s==="active"?["reported","assigned","in_treatment","recovering"].includes(t.status):s==="resolved"?t.status==="resolved":!0);return m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(o,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Injuries"}),e.jsx("p",{className:"text-gray-600",children:"Track and manage your injury reports"})]})]}),e.jsx(d,{to:"/report-injury",children:e.jsxs(r.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium flex items-center space-x-2 hover:bg-blue-700 transition-colors",children:[e.jsx(b,{className:"w-5 h-5"}),e.jsx("span",{children:"Report New Injury"})]})})]}),e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsx("div",{className:"flex space-x-1",children:[{key:"all",label:"All Injuries",count:l.length},{key:"active",label:"Active",count:l.filter(t=>["reported","assigned","in_treatment","recovering"].includes(t.status)).length},{key:"resolved",label:"Resolved",count:l.filter(t=>t.status==="resolved").length}].map(t=>e.jsxs("button",{onClick:()=>u(t.key),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s===t.key?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[t.label," (",t.count,")"]},t.key))})}),e.jsx("div",{className:"space-y-4",children:c.length>0?c.map((t,y)=>e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:y*.1},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t.injury_type}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${h(t.severity)}`,children:t.severity}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${p(t.status)}`,children:t.status.replace("_"," ")})]}),e.jsx("p",{className:"text-gray-600 mb-2",children:t.body_part}),e.jsx("p",{className:"text-sm text-gray-500 mb-4 line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsxs("span",{children:["Occurred: ",new Date(t.date_occurred).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsxs("span",{children:["Reported: ",new Date(t.date_reported).toLocaleDateString()]})]}),t.pain_level&&e.jsx("div",{className:"flex items-center space-x-1",children:e.jsxs("span",{children:["Pain Level: ",t.pain_level,"/10"]})})]})]}),e.jsx("button",{className:"ml-4 p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(v,{className:"w-5 h-5"})})]})},t.id)):e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12 bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx(o,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s==="all"?"No injuries reported":`No ${s} injuries`}),e.jsx("p",{className:"text-gray-600 mb-4",children:s==="all"?"You haven't reported any injuries yet.":`You don't have any ${s} injuries at the moment.`}),s==="all"&&e.jsx(d,{to:"/report-injury",children:e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Report Your First Injury"})})]})})]})}export{E as MyInjuriesPage};
